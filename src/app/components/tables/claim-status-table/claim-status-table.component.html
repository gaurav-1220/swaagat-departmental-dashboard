<div class="table-container">
  <div class="table-header">
    <h3>Claim Status</h3>
    <button class="export-btn" (click)="exportToCSV()">
      <span class="icon">üì•</span>
      Export CSV
    </button>
  </div>

  <!-- Filters Section -->
  <div class="filters-section">
    <div class="filter-controls">
      <div class="filter-group">
        <label for="type-filter">Type:</label>
        <select 
          id="type-filter"
          class="filter-select"
          [(ngModel)]="selectedType"
          (ngModelChange)="onTypeChange()"
        >
          <option value="">All Types</option>
          @for (type of types; track type) {
            <option [value]="type">{{ type }}</option>
          }
        </select>
      </div>

      <div class="filter-group">
        <label for="pending-filter">Pending Range:</label>
        <select 
          id="pending-filter"
          class="filter-select"
          [(ngModel)]="selectedPendingRange"
          (ngModelChange)="onPendingRangeChange()"
        >
          @for (range of pendingRanges; track range.value) {
            <option [value]="range.value">{{ range.label }}</option>
          }
        </select>
      </div>

      @if (selectedType || selectedPendingRange) {
        <button class="clear-filters-btn" (click)="clearFilters()">
          <span class="icon">‚úñ</span>
          Clear Filters
        </button>
      }
    </div>

    <div class="results-count">
      Showing {{ displayedData.length }} of {{ filteredData.length }} records
    </div>
  </div>

  <div class="table-wrapper">
    <table class="claim-table">
      <thead>
        <tr>
          <th>Type</th>
          <th>Claim Submitted</th>
          <th>Approved Claim</th>
          <th>Claim Received</th>
          <th>Pending</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @if (displayedData.length > 0) {
          @for (claim of displayedData; track claim.type) {
            <tr>
              <td class="type-cell">
                <span class="type-badge">{{ claim.type }}</span>
              </td>
              <td>{{ claim.claimSubmitted }}</td>
              <td>{{ claim.approvedClaim }}</td>
              <td>{{ claim.claimReceived }}</td>
              <td>
                <span class="pending-badge">{{ claim.pending }}</span>
              </td>
              <td>
                <button class="delete-btn" (click)="deleteClaim(claim.type)" title="Delete">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          }
        } @else {
          <tr>
            <td colspan="6" class="no-data">
              @if (selectedType || selectedPendingRange) {
                No results found. Try adjusting your filters.
              } @else {
                No claim data available
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  @if (filteredData.length > initialDisplayCount) {
    <div class="table-footer">
      <button class="view-all-btn" (click)="toggleViewAll()">
        {{ showAll ? 'Show Less' : 'View All' }}
        <span class="icon">{{ showAll ? '‚ñ≤' : '‚ñº' }}</span>
      </button>
    </div>
  }
</div>
